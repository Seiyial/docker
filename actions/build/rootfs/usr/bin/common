#!/usr/bin/env bash

set -e

#
# Variables
#

export REPOSITORY_NAME="$(jq .repository.name -M -c -r ${GITHUB_EVENT_PATH})"
export REPOSITORY_FULLNAME="$(jq .repository.full_name -M -c -r ${GITHUB_EVENT_PATH})"
export RELEASE_ACTION="$(jq .action -M -c -r ${GITHUB_EVENT_PATH})"
export RELEASE_NAME="$(jq .release.tag_name -M -c -r ${GITHUB_EVENT_PATH})"

# Strip out the version prefix if necessary
if [ "${RELEASE_NAME:0:1}" == "v" ]; then
    export RELEASE_VERSION="${RELEASE_NAME:1}"
else
    export RELEASE_VERSION="${RELEASE_NAME}"
fi
